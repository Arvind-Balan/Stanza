<!doctype html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
 
  <script src="/javascripts/user-script.js"></script>
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
  <link rel="stylesheet" type="text/css" href="/styles/bootstrap4/bootstrap.min.css">
  <link href="/plugins/font-awesome-4.7.0/css/font-awesome.min.css" rel="stylesheet" type="text/css">
  <link rel="stylesheet" type="text/css" href="/plugins/OwlCarousel2-2.2.1/owl.carousel.css">
  <link rel="stylesheet" type="text/css" href="/plugins/OwlCarousel2-2.2.1/owl.theme.default.css">
  <link rel="stylesheet" type="text/css" href="/plugins/OwlCarousel2-2.2.1/animate.css">
  <link rel="stylesheet" href="/plugins/themify-icons/themify-icons.css">
  <link rel="stylesheet" type="text/css" href="/plugins/jquery-ui-1.12.1.custom/jquery-ui.css">
  <link rel="stylesheet" type="text/css" href="/styles/single_styles.css">
  <link rel="stylesheet" type="text/css" href="/styles/single_responsive.css">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/css/bootstrap.min.css" integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">
<script src="https://code.jquery.com/jquery-3.2.1.slim.min.js" integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN" crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/popper.js@1.12.9/dist/umd/popper.min.js" integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q" crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/js/bootstrap.min.js" integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl" crossorigin="anonymous"></script>
  <link rel="stylesheet" type="text/css" href="plugins/jquery-ui-1.12.1.custom/jquery-ui.css">

  <link rel='stylesheet' href='/stylesheets/style.css' />

  <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>

  <script src="/js/jquery-3.2.1.min.js"></script>
  <script src="/styles/bootstrap4/popper.js"></script>
  <script src="/styles/bootstrap4/bootstrap.min.js"></script>
  <script src="/plugins/Isotope/isotope.pkgd.min.js"></script>
  <script src="/plugins/OwlCarousel2-2.2.1/owl.carousel.js"></script>
  <script src="/plugins/easing/easing.js"></script>
  <script src="plugins/jquery-ui-1.12.1.custom/jquery-ui.js"></script>
  <script src="/js/single_custom.js"></script>
  <script src="/javascripts/user-script.js"></script>
  <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js">
  </script>
  <script type="text/javascript"
    src="https://cdn.jsdelivr.net/npm/jquery-validation@1.19.3/dist/jquery.validate.js"></script>


  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.0/dist/js/bootstrap.bundle.min.js"
    integrity="sha384-A3rJD856KowSb7dwlZdYEkO39Gagi7vIsF0jrRAoQmDKKtQBHUuLZ9AsSv4jD4Xa"
    crossorigin="anonymous"></script>
  <script src="/js/custom.js"></script>
            <script src="https://checkout.razorpay.com/v1/checkout.js"></script>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
  {{!--
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.0/dist/css/bootstrap.min.css" rel="stylesheet"
    integrity="sha384-gH2yIJqKdNHPEq0n4Mqa/HGKIhSkIHeL5AyhkYV8i59U5AR6csBvApHHNl/vI1Bx" crossorigin="anonymous"> --}}

</head>



<body class="">
  <section class="h-100 h-custom" style="background-color: #FFFFFF;">
    <div class="container h-100">
      <div class="row d-flex justify-content-center align-items-center h-100">
        <div class="col-12">
          <div class="card card-registration card-registration-2" style="border-radius: 15px;">
            <div class="card-body p-0">
              <div class="row g-0">

                <div class="modal fade" id="exampleModal" tabindex="-1" role="dialog"
                  aria-labelledby="exampleModalLabel" aria-hidden="true">
                  <div class="modal-dialog modal-dialog-centered" role="document">
                    <div class="modal-content bg-light">
                      <div class="modal-header">
                        {{#if coupons}}
                        <h5 class="modal-title text-dark" id="exampleModalLabel">Available Coupons</h5>
                        <button type="button" class="close" data-bs-dismiss="modal" aria-label="Close">
                          <span aria-hidden="true">&times;</span>
                        </button>
                      </div>
                      <div class="modal-body bg-light">
                        {{!-- <form> --}}
                          <div class="form-group">
                            {{!-- <label for="recipient-name" class="col-form-label">{{this.}}</label> --}}
                            {{!-- <h4 class="text-center">{{this.coupon.name}}</h4> --}}
                            <div class="row d-flex justify-content-start align-items-center">
                              <div class="col-4 text-center">
                                <h5 style="text-decoration: underline;" class=" mt-2 ml-1 mr-1">Coupons</h5>
                              </div>
                              <div class="col-4 text-center">
                                <h5 style="text-decoration: underline;" class=" mt-2 ml-1 mr-1">Code</h5>
                              </div>
                              <div class="col-4 text-center">
                                <h5 style="text-decoration: underline;" class="text-center text-dark mt-2 ml-1 mr-1">
                                  Discount</h5>
                              </div>
                              <!-- The text field -->
                              {{!-- <input type="text" value="Hello World" id="myInput"> --}}

                              <!-- The button used to copy the text -->

                              {{!-- <button onclick="copyCode()" role="button" type="button" id="copy"
                                class="ml-1 btn-sm btn btn-secondary" data-toggle="tooltip" data-placement="top"
                                title="Copy">
                                <i class="fa fa-copy"></i> --}}
                            </div>
                            </button>
                            {{!-- <span>{{this.coupon.name}}hello</span> --}}
                          </div>
                          {{#each coupons}}
{{!-- coupon --}}
                          <div class="form-group">
                            <div class="row d-flex justify-content-start align-items-center">
                              <div class="col-4 text-left">
                                <h5 class=" mt-2 ml-1 mr-1">{{this.coupon.name}}</h5>
                              </div>
                              <div class="col-4 text-center">
                                <input type="text" class="form-control text-dark" disabled value="{{this.coupon.code}}"
                                  id="couponCode">
                              </div>
                              <div class="col-4 text-center">
                                <h5 class="text-center text-dark mt-2 ml-1 mr-1">{{this.coupon.discount}}% OFF</h5>
                              </div>

                            </div>
                            </button>
                          </div>
                          {{/each}}
                      </div>
                    </div>
                  </div>
                </div>
                {{else}}
                {{!-- <h5 class="modal-title text-dark" id="exampleModalLabel">Available Coupons</h5> --}}
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                  <span aria-hidden="true">&times;</span>
                </button>
              </div>
              <div class="modal-body bg-light">
                <div class="form-group">
                  {{!-- <label for="recipient-name" class="col-form-label">{{this.}}</label> --}}
                  {{!-- <h4 class="text-center">{{this.coupon.name}}</h4> --}}
                  <div class="row d-flex justify-content-center align-items-center">
                    {{!-- <input style="width: 150px;" type="text" class="form-control text-dark" disabled
                      value="{{this.coupon.code}}" id="couponCode"> --}}


                    <h5>No coupons available rightnow.</h5>

                  </div>
                  {{!-- </button> --}}
                  {{!-- <span>{{this.coupon.name}}hello</span> --}}
                </div>
              </div>
            </div>
          </div>
        </div>
        {{/if}}



        <div class="col text-center d-flex">


          {{#if login}}
          <div onload="costOfCartItems()" class="col-12 col-sm-12 col-lg-6 bg-grey d-flex pt-2 justify-content-center">

            <div class="price-div d-flex flex-column m-1">
              <a href="/add-address-from-co" style="width: auto; "
                class="mb-3 btn btn-info text-white fw-bold btn-sm">Add
                Address</a>
              <h4 class="fw-bold mb-4 text-center">Summary
                <hr>
              </h4>
              <div class="mb-4">
                <div class="d-flex justify-content-between">
                  <h6 class="text-uppercase">Subtotal</h6>
                  <span class="text-right products">â‚¹
                    <span id="total-cost">{{TotalAmount}}</span>
                    <input value="{{TotalAmount}}" hidden class="form-check-input" name="totalCost" id="Subtotal">
                  </span>
                </div>
              </div>
              <div class="d-flex mb-4 d-flex justify-content-between">
                <h6 class="text-uppercase">Payment method</h6>
                <div class="">
                  <select required id="paymentMethod" name="paymentMethod" class="select " style="border-radius:10px ;">
                    <option selected value="Cash on Delivery">Cash on Delivery</option>
                    <option value="Razorpay">Razor Pay</option>
                  </select>
                </div>
              </div>
              <h6 class="text-uppercase text-center">Apply Coupon</h6>
              <div class="mb-4">
                <div class="d-flex d-inline-flex justify-content-center">
                  <div class="form-outline mb-4 d-flex d-inline-flex justify-content-between align-items-center">
                    <a href="" data-bs-toggle="modal" data-bs-target="#exampleModal"
                      class="btn btn-sm btn-secondary text-uppercase text-white"
                      style="background-color: rgb(34, 92, 107);">Coupons</a>
                    <input name="coupon" style="height: 33px; width: 50%;" placeholder="Enter your code" type="text"
                      id="coupon" class="mr-1 ml-1 form-control form-control-lg" />
                    <a onclick="applyCoupon()" class="btn btn-info btn-sm text-uppercase text-white">Apply</a>
                  </div>
                </div>
                {{!--
                <hr class="my-4"> --}}
                <div class="d-flex justify-content-between">
                  <h6 class="text-uppercase">Discount</h6>
                  <span class="text-right text-success">â‚¹ <span id="discountAmt">0</span></span>
                  <input name="discount" id="discount" hidden>
                </div>
                <hr class="my-4">
                <div class="d-flex justify-content-between mb-3 products">
                  <h6 class="text-uppercase">Total price</h6>
                  <span class="text-right products">â‚¹ <span id="finalCost">{{TotalAmount}}</span></span>
                  <input value="{{totalCost}}" hidden class="form-check-input" name="finalCost" id="final-cost">
                </div>
                <button style="background-color: rgb(34, 92, 107);" onclick="placeOrder()"
                  class="text-white fw-bold btn btn-block btn-sm" data-mdb-ripple-color="dark">PLACE ORDER</button>
              </div>
              {{!-- </form> --}}
            </div>
          </div>
          {{else}}
          {{!-- <div class="col-12 col-sm-12 col-md-6 bg-grey d-flex p-5 pt-2 justify-content-center">
            <div class="price-div" {{!-- style="position: fixed;" --}}>
              <h4 class="fw-bold mb-4 text-center">Summary
                <hr>
              </h4>

              {{!--
              <hr class="my-4"> --}}
              <div class="mb-4">
                <div class="d-flex justify-content-between">

                  <h6 class="text-uppercase">Subtotal
                    {{!-- ( <span class="text-right" id="cart-items"> </span> Items ) --}}
                  </h6>
                  <span class="text-right products">â‚¹
                    <span id="total-cost">{{cost}}</span>
                    <input value="{{cost}}" hidden id="subtotal">
                  </span>
                </div>
                {{!-- <div> --}}

                  {{!-- </div> --}}
              </div>
              <div class="d-flex mb-4 d-flex justify-content-between">
                <h6 class="text-uppercase">Payment method</h6>
                <div class="">
                  <select required id="paymentMethod" name="paymentMethod" class="select " style="border-radius:10px ;">
                    <option selected value="Cash on Delivery">Cash on Delivery</option>
                    <option value="Razorpay">Razor Pay</option>
                    {{!-- <option value="3">Three</option>
                    <option value="4">Four</option> --}}
                  </select>
                  {{!-- <form id="paymentMethod" name="paymentMethod" class="select " style="border-radius:10px ;">
                    <input selected type="radio" value="Cash on Delivery">Cash on Delivery</input>
                    <input value="Razorpay" type="radio">Razor Pay</input>
                  </form> --}}
                </div>
              </div>
              {{!-- <div class="d-flex align-items-center mb-3">


              </div> --}}
              <h6 class="text-uppercase text-center">Apply Coupon</h6>
              <div class="mb-4">
                <div class="d-flex d-inline-flex justify-content-center">
                  <div class="form-outline mb-4 d-flex d-inline-flex justify-content-between align-items-center">
                    <a href="" data-toggle="modal" data-target="#exampleModal"
                      class="btn btn-sm btn-secondary text-uppercase text-white">Get your code</a>
                    <input name="coupon" style="height: 33px; width: 50%;" placeholder="Enter your code" type="text"
                      id="coupon" class="form-control form-control-lg" />
                    <a onclick="applyCoupon()" class="btn btn-warning btn-sm text-uppercase text-white">Apply</a>
                  </div>
                </div>
                {{!--
                <hr class="my-4"> --}}
                <div class="d-flex justify-content-between">
                  <h6 class="text-uppercase">Discount</h6>
                  <span class="text-right text-success">â‚¹<span id="discountAmt">0</span></span>
                  <input name="discount" id="discount" hidden>
                </div>
                <hr class="my-4">
                <div class="d-flex justify-content-between mb-3 products">
                  <h6 class="text-uppercase">Total price</h6>
                  <span class="text-right products">â‚¹ <span id="finalCost">{{totalCost}}</span></span>
                  <input value="{{totalCost}}" hidden class="form-check-input" name="finalCost" id="final-cost">
                </div>
                <button onclick="placeOrder()" class="text-white fw-bold btn btn-info btn-block btn-sm"
                  data-mdb-ripple-color="dark">PLACE ORDER</button>
              </div>
              {{!-- </form> --}}
            </div>
          </div> --}}
          {{/if}}
          
          {{#if data.[0]}}
          <div class="col-12 col-sm-12 col-lg-6 ">
            {{!-- <a href="/add-address" style="width: 100%;" class="btn btn-warning text-white fw-bold btn-sm mb-3">Add
              Address</a> --}}
            <div class="p-5  d-flex flex-column">
              <div class="d-flex justify-content-center align-items-center">
                <h4 class="fw-bold mb-0 text-black mb-1">Select a delivery address
                  <hr>
                </h4>
              </div>

              <div id="products" class="row mb-4">
                <input type="text" hidden id="addressId">
                <div class="d-flex">


                  {{#each data}}
                  <div class="">
                    <div class="col-sm-12">
                      <div class="form-check">
                        <div class="address-card card col-12">
                          <div class="card-body">
                            <input value="{{this._id}}" onchange="selectAddress('{{this._id}}')" name="address"
                              id="selectedAddress" class="form-check-input" type="radio">
                            <label class="form-check-label" for="flexRadioDefault1">
                              {{!-- <span hidden></span> --}}
                              <h5 class="card-title">{{this.fullName}}</h5>
                              <p class="card-text">{{this.building}}, {{this.landmark}}, {{this.area}},
                                {{this.pincode}},
                                <br>{{this.district}},<br> Phone number: {{this.mobile}}
                              </p>
                          </div>
                        </div>

                        </label>
                      </div>
                    </div>
                  </div>
                  {{/each}}
                </div>
              </div>

            </div>
          </div>
          {{/if}}
        </div>
      </div>
    </div>
    </div>
    </div>
    </div>
  </section>

</body>

</html>
<script src="https://checkout.razorpay.com/v1/checkout.js"></script>
<script>
  $("#address").validate({
    ignore: '',
    rule: {
      address: {
        required: true
      }
    }
  })
</script>

{{!--
<script>
  /* function copyCode() {
    // Get the text field
    let copyText = document.getElementById("couponCode");

    // Select the text field
    copyText.select();
    copyText.setSelectionRange(0, 99999); // For mobile devices

    // Copy the text inside the text field
    navigator.clipboard.writeText(copyText.value);

    document.getElementById("copy").title = 'Copied'
  }
</script> --}}